language: python
branches:
  only:
  - master
  - develop
matrix:
  include:
  - name: Python 3.6 on Linux
    python: 3.6
    env:
    - BUILD=True
before_install:
- make build
install:
- pip3 install dist/*.whl $PIPFLAG
- make test-deps
script:
- make lint
before_deploy:
- cd docs
- make build
- cd ..
deploy:
- provider: pypi
  user: __token__
  password:
    secure: Zrb9qk+J6WGeTxOhuSSirRdqLVdsg/dYkrE4h8khOspM3jBbh6D8VsP63xaZHUn11IlRBkR8XK3pmdGqnFMa56BW8nYgg7KgQh90rByZ9P3YIHfo0Jgv2O7vbsQj1A2Mlzmk3M8/tAZLYYSTUTdx4gCvXfcDbwwSD9RCCp1oBBauthlOe5iP+9Q7WUVXgwAQDPUHvBf/4M1uebzoeTatEHAsSRuZEiLWfS/OLHpFN9dbgB+PHZ9fP8ErWOlklHsP9fUwdoIsFfMGD4Ffl6TxEh5M642pmOwmNZTVGCXGtXzo9XF3sblgMFhOJyKZLHLzTu3Jb3LKsC12UqwlTZ5KFjaxhGMljzXfRypWusM5ABUpYHl0R/JbhALCNm3MNYBqYOtwIfNmdkCJ6bpsVNhlLhG1YSYgW8dPjOD1j/aCrO+dYHjHda6xpz9476+3uUXoK577/C6eTg6lDRB/efooqo2XzxiSeHSbRMLgZ43NsSRv7ItBLO7VUFPYRxmCaEEnHdz6p4Gjq2DX5D4QpxlHYUi0pKEjbtulFQy5nX8YSdm15fVHVRqexXBMsuOdd86NmYFJFJQUC5mnwiAy1nXdwHtdDBibEbgoekuagDJ1+yZFrCuMRkQbSOlVFHhQ6vljehNHLPorz3gCOYrMvUC3jmDOUBWdeo1d3rZxuRXv/xQ=
  distributions: sdist bdist_wheel
  skip_existing: true
  on:
    branch: master
    condition: "$BUILD = True"
- provider: pages
  skip_cleanup: true
  github_token: "$GITHUB_TOKEN"
  keep_history: true
  committer_from_gh: true
  local_dir: docs/build/html
  on:
    branch: master
    condition: "$BUILD = True"
env:
  global:
  - secure: VWCKP3TR5gunmoe+ucWBd4ue2Yz1qh+RkhMi/u0UzK87hBcDeDvOa+JD7zk2NzTL+XY3325OFXh2Qi5VgNvWtTfDSI1KMmyYmqau9iP1gluKGlJ+JPk8RJvFaXGeL1ARU8KJOAN8GnRqVKN3aBMJmfLz6MB+Ekz0vLQO01FWGnY+myZ1Q8cgfH4RFxBURhmtsAzCPwue52xqrgRKnl/3LYr8fBO7AsfKdJeNponTJi2uujXdgKFGu+ENALCqRFkfnI11LuwIWIBDN5GcDeWQZWDIUkfQtfoywngcxOVHU5f52uKPkUqT9hR/ulJpjvQviKs3988MR/EmMY4nYIVsxJL5ksJIUMzHlrOZEqzcyBT+thngXmxmyHD6bScMfbcJXUNsJ55zM40Y7lL7OnY25rps3Pc3uML5s+pIRzx1wxOJakBdJ4km0VGhOpKG7z9dZKHQSbL0D4UpX3/ezP+d1oVK8bX2jYFwBEZ1ZKTmeRlVUHp8UYGnJSYZkJiPtnkUg6qQW0BYe108YmjvGBUk7C9hOoDjS0kdQgkdAFs4w7ek5FdrxIiNoQjEnxStEByNX5O4DGF5bb8r7nB7vyhNtw3TG7RPcd6ve9yBMoDZzRLRz8OcG4wcHXqnui1RsBZh3e8dl1E436cSjw3BonjLgsobG5RXSpu8+GZZVrV0iw8=
